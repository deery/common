var Events=function(){function ev(){this.list={}}ev.prototype={on:function(a,b){if(typeof b!='function'){throw new Error('invalid handler.')}this.list[a]=this.list[a]||[]this.list[a].push(b)return this},off:function(a,b){var c=arguments.length var d=this.list[a]if(c==0){this.list={}}else if(c==1){delete this.list[a]}else if(d){for(c=0;c<d.length;c++){if(d[c]===b)d.splice(c,1)}}return this},trigger:function(a){var b=this.list[a]||[]var c=b.slice.call(arguments,1)for(var i=0,len=b.length;i<len;i++){b[i].apply(null,c)}return this},once:function(a,b){if(typeof b!='function'){throw new Error('invalid handler.')}var c=this var d=function(){b.apply(null,arguments)c.off(a,d)}return this.on(a,d)}}return ev}()